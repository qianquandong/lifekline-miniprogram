# 人生K线 - 微信小程序 MVP 产品需求文档

## 📋 文档信息

- **产品名称**: 人生K线（微信小程序版）
- **版本**: MVP v1.0
- **创建日期**: 2025-01-27
- **产品定位**: 基于AI的八字命理可视化工具，将人生运势以K线图形式展现

---

## 🎯 产品目标

### 核心目标
为微信用户提供便捷的八字命理分析工具，通过K线图可视化展示人生运势，帮助用户了解自身命理特点。

### MVP目标
- 验证核心功能可行性
- 测试用户对命理可视化产品的接受度
- 收集用户反馈，为后续迭代做准备

---

## 👥 目标用户

### 主要用户群体
- **年龄**: 25-45岁
- **特征**: 对传统文化、命理占卜感兴趣
- **场景**: 想了解自身运势、性格特点、人生规划
- **使用习惯**: 习惯使用微信小程序，追求便捷快速

---

## ✨ MVP核心功能

### 1. 八字信息输入
**功能描述**: 用户输入四柱八字信息

**输入字段**:
- 出生日期（年、月、日、时）
- 性别（男/女）
- 大运起始年龄（可选，默认0岁）

**交互要求**:
- 使用日期选择器选择出生日期
- 自动计算农历日期（如可能）
- 自动生成四柱干支
- 表单验证：必填项校验

**优先级**: P0（必须）

---

### 2. AI提示词生成与复制
**功能描述**: 根据用户输入的八字信息，生成完整的AI分析提示词

**功能点**:
- 自动生成包含八字信息的完整提示词
- 一键复制提示词到剪贴板
- 显示提示词预览（可选）

**提示词内容包含**:
- 用户八字信息
- 分析要求（性格、事业、财富、婚姻、健康等）
- 输出格式要求（JSON格式）

**优先级**: P0（必须）

---

### 3. AI结果导入
**功能描述**: 用户将从AI（ChatGPT/Claude等）获得的分析结果导入小程序

**功能点**:
- 提供文本输入框，支持粘贴JSON数据
- JSON格式验证
- 数据解析和存储
- 错误提示（格式错误时）

**数据格式要求**:
```json
{
  "personality": "性格分析...",
  "career": "事业分析...",
  "wealth": "财富分析...",
  "marriage": "婚姻分析...",
  "health": "健康分析...",
  "fortune": [
    {
      "age": 1,
      "score": 75,
      "trend": "up"
    }
    // ... 1-100岁数据
  ]
}
```

**优先级**: P0（必须）

---

### 4. 人生K线图展示
**功能描述**: 以K线图形式展示1-100岁的人生运势

**功能点**:
- 使用图表库（如echarts-for-weixin）绘制K线图
- X轴：年龄（1-100岁）
- Y轴：运势分数（0-100）
- K线颜色：
  - 上涨（绿色）：运势上升
  - 下跌（红色）：运势下降
- 支持缩放和滑动查看
- 点击显示具体年龄的运势详情

**图表要求**:
- 响应式设计，适配不同屏幕
- 流畅的交互体验
- 清晰的视觉呈现

**优先级**: P0（必须）

---

### 5. 基础分析报告展示
**功能描述**: 展示AI生成的命理分析报告

**功能点**:
- 展示性格分析
- 展示事业分析
- 展示财富分析
- 展示婚姻分析
- 展示健康分析
- 可折叠/展开的卡片式布局

**优先级**: P0（必须）

---

## 🚫 MVP不包含的功能（后续迭代）

- ❌ 发展风水建议
- ❌ 币圈交易运势
- ❌ 六亲分析
- ❌ 数据导出/分享
- ❌ 历史记录管理
- ❌ 用户登录/账户系统
- ❌ 社交分享功能

---

## 📱 页面结构

### 页面列表
1. **首页（index）**: 八字信息输入
2. **结果页（result）**: K线图和分析报告展示

### 页面流程
```
首页（输入八字）
  ↓
生成提示词 → 复制提示词 → 发送给AI
  ↓
导入AI结果
  ↓
结果页（K线图 + 分析报告）
```

---

## 🎨 UI/UX设计要求

### 设计风格
- **风格**: 简洁、现代、有文化感
- **配色**: 
  - 主色：深色系（如#1a1a1a）或浅色系（如#f5f5f5）
  - 强调色：金色/橙色（代表运势）
  - K线：绿色（涨）、红色（跌）
- **字体**: 使用系统默认字体，确保可读性

### 交互要求
- 操作流程简单直观
- 关键操作有明确反馈
- 加载状态提示
- 错误提示友好

---

## 🔧 技术实现

### 技术栈
- **框架**: 微信小程序原生框架
- **图表库**: echarts-for-weixin 或 wx-charts
- **数据存储**: 本地存储（wx.setStorageSync）
- **日期处理**: 可能需要农历转换库

### 核心依赖
- echarts-for-weixin（图表）
- 可能需要：lunar-calendar（农历转换，可选）

### 性能要求
- 首屏加载时间 < 2秒
- 图表渲染流畅（60fps）
- 包体积控制在合理范围

---

## 📊 数据模型

### 用户输入数据
```javascript
{
  birthDate: "1990-01-01",
  birthTime: "12:00",
  gender: "male", // "male" | "female"
  startAge: 0
}
```

### 八字数据
```javascript
{
  year: "庚午",
  month: "戊子",
  day: "甲寅",
  hour: "庚午"
}
```

### AI分析结果
```javascript
{
  personality: String,
  career: String,
  wealth: String,
  marriage: String,
  health: String,
  fortune: Array<{
    age: Number, // 1-100
    score: Number, // 0-100
    trend: String // "up" | "down" | "flat"
  }>
}
```

---

## ✅ 验收标准

### 功能验收
- [ ] 用户可以输入八字信息
- [ ] 系统能生成完整的AI提示词
- [ ] 用户可以复制提示词
- [ ] 用户可以导入AI返回的JSON数据
- [ ] 系统能正确解析和验证JSON数据
- [ ] K线图能正确展示1-100岁运势
- [ ] 分析报告能正确展示
- [ ] 所有页面在不同机型上正常显示

### 性能验收
- [ ] 页面加载时间 < 2秒
- [ ] 图表渲染流畅，无明显卡顿
- [ ] 无内存泄漏

### 兼容性验收
- [ ] 支持微信版本 >= 7.0
- [ ] 适配主流机型（iPhone、Android）

---

## 🐛 已知限制与风险

### 技术限制
- 小程序包大小限制（2MB，分包后20MB）
- 图表库可能增加包体积
- 农历转换可能需要额外库

### 业务风险
- AI返回数据格式可能不一致，需要容错处理
- 用户可能输入错误的八字信息
- 命理内容可能涉及敏感话题

### 应对措施
- 严格的JSON格式验证和容错
- 清晰的用户引导和错误提示
- 添加免责声明

---

## 📅 开发计划

### Phase 1: 基础功能（Week 1-2）
- 八字信息输入页面
- 提示词生成功能
- 数据导入功能

### Phase 2: 可视化（Week 3）
- K线图实现
- 图表交互功能

### Phase 3: 报告展示（Week 4）
- 分析报告页面
- 页面样式优化

### Phase 4: 测试与优化（Week 5）
- 功能测试
- 性能优化
- Bug修复

---

## 📝 后续迭代方向

### v1.1 功能增强
- 数据本地存储和历史记录
- 分享功能
- 更多分析维度

### v1.2 社交功能
- 用户账户系统
- 数据云端同步
- 社区功能

### v2.0 高级功能
- 发展风水建议
- 币圈交易运势
- 六亲分析
- 更多可视化图表

---

## 📞 联系方式

- **产品负责人**: [待填写]
- **开发负责人**: [待填写]
- **设计负责人**: [待填写]

---

## 📄 附录

### 参考资源
- [lifekline GitHub项目](https://github.com/curionox/lifekline)
- 微信小程序官方文档
- echarts-for-weixin文档

### 相关文档
- 技术设计文档（待补充）
- UI设计稿（待补充）
- 测试用例（待补充）

---

**文档版本**: v1.0  
**最后更新**: 2025-01-27
